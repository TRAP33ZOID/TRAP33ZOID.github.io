<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GO Projections</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div class="container">
        <div class="assumptions-half">
            <ul class="tabs" id="left-tabs">
                <li class="active" data-tab="widgets">Widgets</li>
                <li data-tab="product2">Product 2</li>
                <li data-tab="product3">Product 3</li>
            </ul>
            <div id="widgets" class="tab-content active">
                <ul class="sub-tabs" id="widgets-sub-tabs">
                    <li class="active" data-sub-tab="assumption1-widgets">Assumption 1</li>
                    <li data-sub-tab="assumption2-widgets">Assumption 2</li>
                    <li data-sub-tab="assumption3-widgets">Assumption 3</li>
                </ul>
                <div id="assumption1-widgets" class="tab-content active">

                    <div class="assumption-line product service">
                    </div>
                    <div class="assumption-line product service">

                        <label>I am selling:</label>
                        <select id="product-service-dropdown">
                            <option value="product">Product</option>
                            <option value="service">Service</option>
                        </select>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Placeholder text for now</span>
                        </span>
                    </div>

                    <!-- New 'Revenue Model' assumption line -->
                    <div class="assumption-line product service">
                        <label>
                            <h4>REVENUE MODEL</h4>
                        </label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explanation of revenue model options Explanation of revenue model
                                options</span>
                        </span>
                    </div>

                    <!-- New 'Customers pay' assumption line -->
                    <div class="assumption-line product service">
                        <label>Customers pay:</label>
                        <select id="customer-pay-dropdown">
                            <option value="upfront one-time">Upfront one-time</option>
                            <option value="recurring payments">Recurring payments</option>
                        </select>
                    </div>

                    <!-- New 'I am paid' assumption line -->
                    <div class="assumption-line product service">
                        <label>I am paid:</label>
                        <select id="i-am-paid-dropdown">
                            <option value="100%">100%</option>
                            <option value="share of revenue">Share of Revenue</option>
                        </select>
                    </div>

                    <!-- New 'Flat fee per sale?' assumption line -->
                    <div class="assumption-line product service share-of-revenue-specific" style="display: none;">
                        <label>Do you receive a flat fee per sale?</label>
                        <input type="checkbox" id="flat-fee-per-sale-checkbox">
                    </div>
                    <div class="assumption-line product service share-of-revenue-specific" style="display: none;">
                        <label>Flat fee per sale:</label>
                        <input class="short-input" type="number" id="flat-fee-per-sale-input" style="display: none;">
                    </div>

                    <!-- New '% of sale?' assumption line -->
                    <div class="assumption-line product service share-of-revenue-specific" style="display: none;">
                        <label>Do you receive a % of sale?</label>
                        <input type="checkbox" id="percentage-of-sale-checkbox">
                    </div>
                    <div class="assumption-line product service share-of-revenue-specific" style="display: none;">
                        <label>% of sales:</label>
                        <input class="short-input" type="number" id="percentage-of-sale-input" style="display: none;">
                    </div>

                    <!-- New 'Revenue start month' assumption line -->
                    <div class="assumption-line product service">
                        <label>In what month does revenue start?</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Enter the month when you expect to start generating
                                revenue.</span>
                        </span>
                        <input class="short-input" type="number" id="revenue-start-month">
                    </div>

                    <!-- 'Expected pricing' heading -->
                    <div class="assumption-line product service">
                        <h4>EXPECTED PRICING</h4>
                    </div>

                    <!-- New 'Initial price:' assumption line -->
                    <div class="assumption-line product service">
                        <label>Initial price:</label>
                        <input class="short-input" type="number" id="initial-price">
                    </div>

                    <!-- New 'Recurring price' assumption line -->
                    <div class="assumption-line product service" id="recurring-price-field">
                        <label>Recurring price:</label>
                        <input class="short-input" type="number" id="recurring-price">
                    </div>

                    <!-- Frequency of Recurring Payments -->
                    <div class="assumption-line product service" id="recurring-payment-frequency-field">
                        <label>Frequency of recurring payments:</label>
                        <select id="recurring-payment-frequency">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                    </div>

                    <!-- Inflation -->
                    <div class="assumption-line product service">
                        <label>Inflation:</label>
                        <input type="number" id="inflation" class="short-input">
                    </div>

                    <!-- Price in Year 2 to Year 5 -->
                    <div class="assumption-line product service"><label>Price in year 2:</label><input id="price-year-2"
                            type="number" class="short-input"></div>
                    <div class="assumption-line product service"><label>Price in year 3:</label><input id="price-year-3"
                            type="number" class="short-input"></div>
                    <div class="assumption-line product service"><label>Price in year 4:</label><input id="price-year-4"
                            type="number" class="short-input"></div>
                    <div class="assumption-line product service"><label>Price in year 5:</label><input id="price-year-5"
                            type="number" class="short-input"></div>

                    <!-- Expected Number of Customers Heading -->
                    <div class="assumption-line product service">
                        <h4 class="assumption-line product service">EXPECTED NUMBER OF CUSTOMERS</h4>
                    </div>

                    <!-- Number of New Customers -->
                    <div class="assumption-line product service">
                        <label>Number of new customers:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Enter the number of new customers in month 1.</span>
                        </span>
                        <label>Month 1:</label>
                        <input id="new-customers-month1" type="number" class="short-input">
                    </div>

                    <!-- Growth Rate for Year 1 to Year 5 -->
                    <div class="assumption-line product service">
                        <label>Growth rate for year 1:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Annual growth rate or enter monthly.</span>
                        </span>
                        <input type="number" id="growth-rate-year1" class="short-input">
                        <label>OR enter monthly</label>
                        <span class="plus-icon year1">+</span>
                    </div>

                    <!-- Growth Rate months for year 1 -->
                    <div class="assumption-line year1">
                        <input type="number" id="Month1" class="short-input" placeholder="Month1">
                        <input type="number" id="Month2" class="short-input" placeholder="Month2">
                        <input type="number" id="Month3" class="short-input" placeholder="Month3">
                    </div>
                    <div class="assumption-line year1">
                        <input type="number" id="Month4" class="short-input" placeholder="Month4">
                        <input type="number" id="Month5" class="short-input" placeholder="Month5">
                        <input type="number" id="Month6" class="short-input" placeholder="Month6">
                    </div>
                    <div class="assumption-line year1">
                        <input type="number" id="Month7" class="short-input" placeholder="Month7">
                        <input type="number" id="Month8" class="short-input" placeholder="Month8">
                        <input type="number" id="Month9" class="short-input" placeholder="Month9">
                    </div>
                    <div class="assumption-line year1">
                        <input type="number" id="Month10" class="short-input" placeholder="Month10">
                        <input type="number" id="Month11" class="short-input" placeholder="Month11">
                        <input type="number" id="Month12" class="short-input" placeholder="Month12">
                    </div>


                    <div class="assumption-line product service">
                        <label>Growth rate for year 2:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Annual growth rate or enter monthly.</span>
                        </span>
                        <input type="number" id="growth-rate-year2" class="short-input">
                        <label>OR enter monthly</label>
                        <span class="plus-icon year2">+</span>
                    </div>

                    <!-- Growth Rate months for year 2 -->
                    <div class="assumption-line year2">
                        <input type="number" id="Month13" class="short-input" placeholder="Month13">
                        <input type="number" id="Month14" class="short-input" placeholder="Month14">
                        <input type="number" id="Month15" class="short-input" placeholder="Month15">
                    </div>
                    <div class="assumption-line year2">
                        <input type="number" id="Month16" class="short-input" placeholder="Month16">
                        <input type="number" id="Month17" class="short-input" placeholder="Month17">
                        <input type="number" id="Month18" class="short-input" placeholder="Month18">
                    </div>
                    <div class="assumption-line year2">
                        <input type="number" id="Month19" class="short-input" placeholder="Month19">
                        <input type="number" id="Month20" class="short-input" placeholder="Month20">
                        <input type="number" id="Month21" class="short-input" placeholder="Month21">
                    </div>
                    <div class="assumption-line year2">
                        <input type="number" id="Month22" class="short-input" placeholder="Month22">
                        <input type="number" id="Month23" class="short-input" placeholder="Month23">
                        <input type="number" id="Month24" class="short-input" placeholder="Month24">
                    </div>

                    <div class="assumption-line product service">
                        <label>Growth rate for year 3:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Annual growth rate or enter monthly.</span>
                        </span>
                        <input type="number" id="growth-rate-year3" class="short-input">
                        <label>OR enter monthly</label>
                        <span class="plus-icon year3">+</span>
                    </div>

                    <!-- Growth Rate months for year 3 -->
                    <div class="assumption-line year3">
                        <input type="number" id="Month25" class="short-input" placeholder="Month25">
                        <input type="number" id="Month26" class="short-input" placeholder="Month26">
                        <input type="number" id="Month27" class="short-input" placeholder="Month27">
                    </div>
                    <div class="assumption-line year3">
                        <input type="number" id="Month28" class="short-input" placeholder="Month28">
                        <input type="number" id="Month29" class="short-input" placeholder="Month29">
                        <input type="number" id="Month30" class="short-input" placeholder="Month30">
                    </div>
                    <div class="assumption-line year3">
                        <input type="number" id="Month31" class="short-input" placeholder="Month31">
                        <input type="number" id="Month32" class="short-input" placeholder="Month32">
                        <input type="number" id="Month33" class="short-input" placeholder="Month33">
                    </div>
                    <div class="assumption-line year3">
                        <input type="number" id="Month34" class="short-input" placeholder="Month34">
                        <input type="number" id="Month35" class="short-input" placeholder="Month35">
                        <input type="number" id="Month36" class="short-input" placeholder="Month36">
                    </div>

                    <div class="assumption-line product service">
                        <label>Growth rate for year 4:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Annual growth rate or enter monthly.</span>
                        </span>
                        <input type="number" id="growth-rate-year4" class="short-input">
                        <label>OR enter monthly</label>
                        <span class="plus-icon year4">+</span>
                    </div>

                    <div class="assumption-line year4">
                        <input type="number" id="Month37" class="short-input" placeholder="Month37">
                        <input type="number" id="Month38" class="short-input" placeholder="Month38">
                        <input type="number" id="Month39" class="short-input" placeholder="Month39">
                    </div>
                    <div class="assumption-line year4">
                        <input type="number" id="Month40" class="short-input" placeholder="Month40">
                        <input type="number" id="Month41" class="short-input" placeholder="Month41">
                        <input type="number" id="Month42" class="short-input" placeholder="Month42">
                    </div>
                    <div class="assumption-line year4">
                        <input type="number" id="Month43" class="short-input" placeholder="Month43">
                        <input type="number" id="Month44" class="short-input" placeholder="Month44">
                        <input type="number" id="Month45" class="short-input" placeholder="Month45">
                    </div>
                    <div class="assumption-line year4">
                        <input type="number" id="Month46" class="short-input" placeholder="Month46">
                        <input type="number" id="Month47" class="short-input" placeholder="Month47">
                        <input type="number" id="Month48" class="short-input" placeholder="Month48">
                    </div>

                    <div class="assumption-line product service">
                        <label>Growth rate for year 5:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Annual growth rate or enter monthly.</span>
                        </span>
                        <input type="number" id="growth-rate-year5" class="short-input">
                        <label>OR enter monthly</label>
                        <span class="plus-icon year5">+</span>
                    </div>

                    <div class="assumption-line year5">
                        <input type="number" id="Month49" class="short-input" placeholder="Month49">
                        <input type="number" id="Month50" class="short-input" placeholder="Month50">
                        <input type="number" id="Month51" class="short-input" placeholder="Month51">
                    </div>
                    <div class="assumption-line year5">
                        <input type="number" id="Month52" class="short-input" placeholder="Month52">
                        <input type="number" id="Month53" class="short-input" placeholder="Month53">
                        <input type="number" id="Month54" class="short-input" placeholder="Month54">
                    </div>
                    <div class="assumption-line year5">
                        <input type="number" id="Month55" class="short-input" placeholder="Month55">
                        <input type="number" id="Month56" class="short-input" placeholder="Month56">
                        <input type="number" id="Month57" class="short-input" placeholder="Month57">
                    </div>
                    <div class="assumption-line year5">
                        <input type="number" id="Month58" class="short-input" placeholder="Month58">
                        <input type="number" id="Month59" class="short-input" placeholder="Month59">
                        <input type="number" id="Month60" class="short-input" placeholder="Month60">
                    </div>



                    <!-- Do Existing Customers Repurchase? -->
                    <div class="assumption-line product">
                        <label>Do existing customers repurchase?</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain repurchase condition.</span>
                        </span>
                        <input type="checkbox" id="repurchase-checkbox"> Yes
                    </div>

                    <div class="assumption-line repurchase-specific" style="display:none;">
                        <label>What % of new customers will repurchase?</label>
                        <input type="number" class="short-input">
                    </div>

                    <div class="assumption-line repurchase-specific" style="display:none;">
                        <label>Frequency of repurchase:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain frequency of repurchase.</span>
                        </span>
                        <select id="repurchase-frequency">
                            <option value="monthly">Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="yearly">Yearly</option>
                            <option value="bi-annually">Bi-Annually</option>
                            <option value="every 3 years">Every 3 Years</option>
                            <option value="every 4 years">Every 4 Years</option>
                        </select>
                    </div>


                    <!-- Costs of Revenue Heading -->
                    <div class="assumption-line product service">
                        <h4 class="assumption-line product service">COSTS OF REVENUE</h4>
                    </div>

                    <!-- Cost of Goods Sold or Cost of Service -->
                    <div class="assumption-line product">
                        <label>Cost of goods sold:</label>
                    </div>

                    <!-- Cost Price -->
                    <div class="assumption-line product">
                        <label>Cost price:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain cost price.</span>
                        </span>
                        <input type="number" class="short-input" id="costPricePerUnit"> Per Unit
                    </div>

                    <!-- Shipping & Local Delivery Costs -->
                    <div class="assumption-line product">
                        <label>Shipping & local delivery costs:</label>
                        <input type="number" class="short-input" id="shippingLocalCostPerUnit"> Per Unit
                    </div>

                    <div class="assumption-line service">
                        <label>Cost of service:</label>
                    </div>

                    <!-- My cost -->
                    <div class="assumption-line service">
                        <label>My cost is: </label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">placeholder.</span>
                        </span>
                        <label>Per</label>
                        <select id="my-cost-dropdown">
                            <option value="minute">Minute</option>
                            <option value="hour">Hour</option>
                            <option value="day">Day</option>
                        </select>
                    </div>

                    <!-- One customer takes -->
                    <div class="assumption-line service">
                        <label>One customer takes: </label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">placeholder.</span>
                        </span>
                        <select id="one-customer-takes-dropdown">
                            <option value="minute">Minute</option>
                            <option value="hour">Hour</option>
                            <option value="day">Day</option>
                        </select>
                    </div>





                    <!-- Operating Expenses Heading -->
                    <div class="assumption-line product service">
                        <h4 class="assumption-line product service">OPERATING EXPENSES</h4>
                    </div>

                    <!-- Do You Have Any Fixed Expenses? -->
                    <div class="assumption-line product service">
                        <label>Do you have any fixed expenses?</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain fixed expenses.</span>
                        </span>
                        <select id="fixed-expenses-dropdown">
                            <option value="yes">Yes</option>
                            <option value="no" selected>No</option>
                        </select>
                    </div>

                    <!-- Fixed Expenses -->
                    <div class="assumption-line fixed-expenses-specific" style="display:none;">
                        <label>Fixed expenses:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Details about fixed expenses.</span>
                        </span>
                        <span class="plus-icon" data-purpose="fixedExpense">+</span>
                    </div>

                    <div class="assumption-line fixed-expenses-specific" style="display:none;">
                        <input type="text" class="short-input" placeholder="Name" id="fixed-expense-name">
                        <input type="number" class="short-input" id="fixed-expense" placeholder="Amount">
                        <label>Month:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain monthly fixed expense.</span>
                        </span>
                        <input type="text" class="short-input" id="fixed-expense-month" placeholder="Month">
                    </div>

                    <!-- XXXXXXXXXXXXXXXXXXXXXXXXXXX -->


                    <!-- Do You Have Any R&D Expenses? -->
                    <div class="assumption-line product service">
                        <label>Do you have any R&D expenses?</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain R&D expenses.</span>
                        </span>
                        <select id="rAndD-expenses-dropdown">
                            <option value="yes">Yes</option>
                            <option value="no" selected>No</option>
                        </select>
                    </div>

                    <!-- R&D Expenses -->
                    <div class="assumption-line rAndD-expenses-specific" style="display:none;">
                        <label>R&D expenses:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Details about R&D expenses.</span>
                        </span>
                        <span class="plus-icon" data-purpose="rAndDExpense">+</span>
                    </div>

                    <div class="assumption-line rAndD-expenses-specific" style="display:none;">
                        <input type="text" class="short-input" placeholder="Name" id="rAndD-expense-name">
                        <input type="number" class="short-input" id="rAndD-expense" placeholder="Amount">
                        <label>Month:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain monthly R&D expense.</span>
                        </span>
                        <input type="text" class="short-input" id="rAndD-expense-month" placeholder="Month">

                    </div>

                    <!-- Do You Have Any Sales Expenses? -->
                    <div class="assumption-line product service">
                        <label>Do you have any sales expenses?</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain sales expenses.</span>
                        </span>
                        <select id="sales-expenses-dropdown">
                            <option value="yes">Yes</option>
                            <option value="no" selected>No</option>
                        </select>
                    </div>

                    <!-- Sales Expenses Specific -->
                    <div class="assumption-line sales-expenses-specific" style="display:none;">
                        <label>Sales expenses:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Details about sales expenses.</span>
                        </span>
                        <span class="plus-icon" data-purpose="salesExpense">+</span>
                    </div>

                    <div class="assumption-line sales-expenses-specific" style="display:none;">
                        <input type="text" class="short-input" placeholder="Name" id="sales-expense-name">
                        <input type="number" class="short-input" id="sales-expense" placeholder="Amount">
                        <label>Month:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain monthly sales expense.</span>
                        </span>
                        <input type="text" class="short-input" id="sales-expense-month" placeholder="Month">

                    </div>

                    <!-- Do You Have Any Marketing Expenses? -->
                    <div class="assumption-line product service">
                        <label>Do you have any marketing expenses?</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain marketing expenses.</span>
                        </span>
                        <select id="marketing-expenses-dropdown">
                            <option value="yes">Yes</option>
                            <option value="no" selected>No</option>
                        </select>
                    </div>

                    <!-- Marketing Expenses Specific -->
                    <div class="assumption-line marketing-expenses-specific" style="display:none;">
                        <label>Marketing expenses:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Details about marketing expenses.</span>
                        </span>
                        <span class="plus-icon" data-purpose="marketingExpense">+</span>
                    </div>

                    <div class="assumption-line marketing-expenses-specific" style="display:none;">
                        <input type="text" class="short-input" placeholder="Name" id="marketing-expense-name">
                        <input type="number" class="short-input" id="marketing-expense" placeholder="Amount">
                        <label>Month:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain monthly marketing expense.</span>
                        </span>
                        <input type="text" class="short-input" id="marketing-expense-month" placeholder="Month">

                    </div>

                    <!-- Do You Have Any Staff Expenses? -->
                    <div class="assumption-line product service">
                        <label>Do you have any staff expenses?</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain staff expenses.</span>
                        </span>
                        <select id="staff-expenses-dropdown">
                            <option value="yes">Yes</option>
                            <option value="no" selected>No</option>
                        </select>
                    </div>

                    <!-- Staff Expenses Specific -->
                    <div class="assumption-line staff-expenses-specific" style="display:none;">
                        <label>Staff expenses:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Details about staff expenses.</span>
                        </span>
                        <span class="plus-icon" data-purpose="staffExpense">+</span>
                    </div>

                    <div class="assumption-line staff-expenses-specific" style="display:none;">
                        <input type="text" class="short-input" placeholder="Name" id="staff-expense-name">
                        <input type="number" class="short-input" placeholder="Amount" id="staff-expense-amount">
                        <label>Month:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain monthly staff expense.</span>
                        </span>
                        <input type="text" class="short-input" placeholder="Month" id="staff-expense-month">
                    </div>

                    <!-- Do You Have Any Other Expenses? -->
                    <div class="assumption-line product service">
                        <label>Do you have any other expenses?</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain other expenses.</span>
                        </span>
                        <select id="other-expenses-dropdown">
                            <option value="yes">Yes</option>
                            <option value="no" selected>No</option>
                        </select>
                    </div>

                    <!-- Other Expenses Specific -->
                    <div class="assumption-line other-expenses-specific" style="display:none;">
                        <label>Other expenses:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Details about other expenses.</span>
                        </span>
                        <span class="plus-icon" data-purpose="otherExpense">+</span>
                    </div>

                    <div class="assumption-line other-expenses-specific" style="display:none;">
                        <input type="text" class="short-input" placeholder="Name" id="other-expense-name">
                        <input type="number" class="short-input" id="other-expense" placeholder="Amount">
                        <label>Month:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explain monthly other expense.</span>
                        </span>
                        <input type="text" class="short-input" id="other-expense-month" placeholder="Month">
                    </div>

                    <!-- 'Assets' Heading -->
                    <div class="assumption-line product service">
                        <h4>ASSETS</h4>
                    </div>

                    <!-- 'tax' Assumption Line -->
                    <div class="assumption-line product service">
                        <label>Do you plan to purchase any assets?</label>
                        <select id="purchase-assets-dropdown">
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Select 'Yes' if you plan to purchase assets.</span>
                        </span>
                    </div>

                    <!-- 'Asset Name' and 'Month' Assumption Line, initially hidden -->
                    <div class="assumption-line product service asset-specific" style="display: none;">
                        <input type="text" class="short-input" placeholder="Name" id="asset-name">
                        <input type="number" placeholder="Amount" class="short-input" id="asset-amount">
                        <label>Month:</label>
                        <input type="number" class="short-input" placeholder="Month" id="asset-month">
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Enter the name and purchase month of the asset.</span>
                        </span>
                        <input type="number" class="short-input" placeholder="Lifespan" id="asset-lifespan">
                        <select id="asset-lifespan-dropdown">
                            <option value="months">Months</option>
                            <option value="years">Years</option>
                        </select>
                        <span class="plus-icon" data-purpose="extraAsset">+</span>
                    </div>

                    <!-- 'LOANS' Heading -->
                    <div class="assumption-line product service">
                        <h4>LOANS</h4>
                    </div>

                    <!-- Have you taken out any loans? -->
                    <div class="assumption-line product service">
                        <label>Have you taken out any loans?</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Indicate if you have taken any loans for your business.</span>
                        </span>
                        <select id="loans-dropdown">
                            <option value="no">No</option>
                            <option value="yes" selected>Yes</option>
                        </select>
                    </div>


                    <div class="loan-details-specific" style="display:none;">
                        <div class="assumption-line product service">
                            <input type="text" class="short-input" placeholder="Name" id="loan-name">
                            <input type="number" placeholder="Amount" id="loan-amount" class="short-input">
                            <label>Month:</label>
                            <input type="number" class="short-input" placeholder="Month" id="loan-month">
                            <span class="tooltip custom-tooltip">?
                                <span class="tooltip-text">Enter the month when the loan was taken.</span>
                            </span>
                            <input type="number" class="short-input" placeholder="Interest %" id="loan-interest">
                            <select id="loan-interest-dropdown">
                                <option value="per month">Per month</option>
                                <option value="per year" selectedfv>Per year</option>
                            </select>
                            <span class="plus-icon" data-purpose="extraLoan">+</span>
                        </div>
                    </div>

                    <!-- Corporate Tax -->
                    <div class="assumption-line product service">
                        <label>Corporate tax:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Enter the corporate tax rate applicable to your business.</span>
                        </span>
                        <input type="number" placeholder="Tax %" class="short-input" id="tax-amount">
                    </div>

                    <!-- Shareholders Equity Heading -->
                    <div class="assumption-line product service">
                        <h4>SHAREHOLDERS EQUITY</h4>
                    </div>

                    <div class="assumption-line product service">
                        <label>Any shareholder contributions?</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explanation about shareholder contributions</span>
                        </span>
                        <select id="shareholder-contributions-dropdown">
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>
                    <div class="assumption-line product service shareholder-specific" style="display: none;">
                        <input type="text" class="short-input" placeholder="Name" id="shareholder-name">
                        <input type="number" placeholder="Amount" class="short-input" id="shareholder-amount">
                        <label>Month:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Enter the month of contribution</span>
                        </span>
                        <input type="number" placeholder="Month" class="short-input" id="shareholder-month">
                        <span class="plus-icon" data-purpose="extraShareHolder">+</span>
                    </div>



                    <!-- Capital Assets -->
                    <div class="assumption-line product service">
                        <h4>Capital Assets</h4>
                    </div>

                    <div class="assumption-line product service">
                        <label>Did you purchase any Capital Assets</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">Explanation about capital assets</span>
                        </span>
                        <select id="capital-assets-dropdown">
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>
                    <div class="assumption-line product service capital-assets-specific" style="display: none;">
                        <input type="text" class="short-input" placeholder="Name" id="capital-asset-name">
                        <input type="number" placeholder="Amount" class="short-input" id="capital-asset-amount">
                        <label>Month:</label>
                        <span class="tooltip custom-tooltip">?
                            <span class="tooltip-text">capital asset tooltip</span>
                        </span>
                        <input type="number" placeholder="Month" class="short-input" id="capital-asset-month">
                        <span class="plus-icon" data-purpose="extraCapitalAsset">+</span>
                    </div>
                </div>





                <div id="assumption2-widgets" class="tab-content">
                    Placeholder text for Assumption 2 of Widgets
                </div>
                <div id="assumption3-widgets" class="tab-content">
                    Placeholder text for Assumption 3 of Widgets
                </div>
            </div>
            <div id="product2" class="tab-content">
                <ul class="sub-tabs" id="product2-sub-tabs">
                    <li class="active" data-sub-tab="assumption1-product2">Assumption 1</li>
                    <li data-sub-tab="assumption2-product2">Assumption 2</li>
                    <li data-sub-tab="assumption3-product2">Assumption 3</li>
                </ul>
                <div id="assumption1-product2" class="tab-content active">
                    Placeholder text for Assumption 1 of Product 2
                </div>
                <div id="assumption2-product2" class="tab-content">
                    Placeholder text for Assumption 2 of Product 2
                </div>
                <div id="assumption3-product2" class="tab-content">
                    Placeholder text for Assumption 3 of Product 2
                </div>
            </div>
            <div id="product3" class="tab-content">
                <ul class="sub-tabs" id="product3-sub-tabs">
                    <li class="active" data-sub-tab="assumption1-product3">Assumption 1</li>
                    <li data-sub-tab="assumption2-product3">Assumption 2</li>
                    <li data-sub-tab="assumption3-product3">Assumption 3</li>
                </ul>
                <div id="assumption1-product3" class="tab-content active">
                    Placeholder text for Assumption 1 of Product 3
                </div>
                <div id="assumption2-product3" class="tab-content">
                    Placeholder text for Assumption 2 of Product 3
                </div>
                <div id="assumption3-product3" class="tab-content">
                    Placeholder text for Assumption 3 of Product 3
                </div>
            </div>
        </div>

        <div class="graphs-half">
            <ul class="tabs" id="right-tabs">
                <li class="active" data-tab="revenue">Revenue</li>
                <li data-tab="expenses">Expenses</li>
                <li data-tab="profit">Profit</li>
                <li data-tab="projected-needs">Projected Cash Needs</li>
                <li data-tab="testing">Testing</li>
            </ul>
            <div id="revenue" class="tab-content active">
                <select id="revenue-visualization-option">
                    <option value="monthly">Monthly</option>
                    <option value="quarterly">Quarterly</option>
                    <option value="yearly">Yearly</option>
                </select>
                <canvas id="revenueChart"></canvas>
                <div>
                    <table id="revenueTable" border="1">
                        <tr>
                            <th></th>
                            <th>Year 1</th>
                            <th>Margin 1</th>
                            <th>Year 2</th>
                            <th>Margin 2</th>
                            <th>Year 3</th>
                            <th>Margin 3</th>
                            <th>Year 4</th>
                            <th>Margin 4</th>
                            <th>Year 5</th>
                            <th>Margin 5</th>
                        </tr>
                        <tr>
                            <td><strong>REVENUES</strong></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;"><strong>Category 1</strong></td>
                            <td style="text-align: center; font-weight: bold;"></td>
                            <td style="text-align: center; font-weight: bold;" class="revenueMargin1"></td>
                            <td style="text-align: center; font-weight: bold;"></td>
                            <td style="text-align: center; font-weight: bold;" class="revenueMargin2"></td>
                            <td style="text-align: center; font-weight: bold;"></td>
                            <td style="text-align: center; font-weight: bold;" class="revenueMargin3"></td>
                            <td style="text-align: center; font-weight: bold;"></td>
                            <td style="text-align: center; font-weight: bold;" class="revenueMargin4"></td>
                            <td style="text-align: center; font-weight: bold;"></td>
                            <td style="text-align: center; font-weight: bold;" class="revenueMargin5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">Product/Service 1</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;" class="revenueMargin1"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;" class="revenueMargin2"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;" class="revenueMargin3"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;" class="revenueMargin4"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;" class="revenueMargin5"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td><strong>TOTAL REVENUES</strong></td>
                            <td style="text-align: center; font-weight: bold;" id="totalRevenueYear1"></td>
                            <td style="text-align: center;" class="revenueMargin1"></td>
                            <td style="text-align: center; font-weight: bold;" id="totalRevenueYear2"></td>
                            <td style="text-align: center;" class="revenueMargin2"></td>
                            <td style="text-align: center; font-weight: bold;" id="totalRevenueYear3"></td>
                            <td style="text-align: center;" class="revenueMargin3"></td>
                            <td style="text-align: center; font-weight: bold;" id="totalRevenueYear4"></td>
                            <td style="text-align: center;" class="revenueMargin4"></td>
                            <td style="text-align: center; font-weight: bold;" id="totalRevenueYear5"></td>
                            <td style="text-align: center;" class="revenueMargin5"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td><strong>COSTS OF GOODS SOLD</strong></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;"><strong>Category 1</strong></td>
                            <td style="text-align: center; font-weight: bold;" class="totalCOGSYear1"></td>
                            <td style="text-align: center; font-weight: bold;" class="marginCOGSYear1"></td>
                            <td style="text-align: center; font-weight: bold;" class="totalCOGSYear2"></td>
                            <td style="text-align: center; font-weight: bold;" class="marginCOGSYear2"></td>
                            <td style="text-align: center; font-weight: bold;" class="totalCOGSYear3"></td>
                            <td style="text-align: center; font-weight: bold;" class="marginCOGSYear3"></td>
                            <td style="text-align: center; font-weight: bold;" class="totalCOGSYear4"></td>
                            <td style="text-align: center; font-weight: bold;" class="marginCOGSYear4"></td>
                            <td style="text-align: center; font-weight: bold;" class="totalCOGSYear5"></td>
                            <td style="text-align: center; font-weight: bold;" class="marginCOGSYear5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">Product/Service 1</td>
                            <td style="text-align: center;" class="totalCOGSYear1"></td>
                            <td style="text-align: center;" class="marginCOGSYear1"></td>
                            <td style="text-align: center;" class="totalCOGSYear2"></td>
                            <td style="text-align: center;" class="marginCOGSYear2"></td>
                            <td style="text-align: center;" class="totalCOGSYear3"></td>
                            <td style="text-align: center;" class="marginCOGSYear3"></td>
                            <td style="text-align: center;" class="totalCOGSYear4"></td>
                            <td style="text-align: center;" class="marginCOGSYear4"></td>
                            <td style="text-align: center;" class="totalCOGSYear5"></td>
                            <td style="text-align: center;" class="marginCOGSYear5"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td><strong>TOTAL COST OF GOODS SOLD</strong></td>
                            <td style="text-align: center; font-weight: bold;" class="totalCOGSYear1"></td>
                            <td style="text-align: center; font-weight: bold;" class="marginCOGSYear1"></td>
                            <td style="text-align: center; font-weight: bold;" class="totalCOGSYear2"></td>
                            <td style="text-align: center; font-weight: bold;" class="marginCOGSYear2"></td>
                            <td style="text-align: center; font-weight: bold;" class="totalCOGSYear3"></td>
                            <td style="text-align: center; font-weight: bold;" class="marginCOGSYear3"></td>
                            <td style="text-align: center; font-weight: bold;" class="totalCOGSYear4"></td>
                            <td style="text-align: center; font-weight: bold;" class="marginCOGSYear4"></td>
                            <td style="text-align: center; font-weight: bold;" class="totalCOGSYear5"></td>
                            <td style="text-align: center; font-weight: bold;" class="marginCOGSYear5"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td><strong>GROSS PROFIT (LOSS)</strong></td>
                            <td style="text-align: center;" class="GPLYear1"></td>
                            <td style="text-align: center;" class="GPLYear1Margin"></td>
                            <td style="text-align: center;" class="GPLYear2"></td>
                            <td style="text-align: center;" class="GPLYear2Margin"></td>
                            <td style="text-align: center;" class="GPLYear3"></td>
                            <td style="text-align: center;" class="GPLYear3Margin"></td>
                            <td style="text-align: center;" class="GPLYear4"></td>
                            <td style="text-align: center;" class="GPLYear4Margin"></td>
                            <td style="text-align: center;" class="GPLYear5"></td>
                            <td style="text-align: center;" class="GPLYear4Margin"></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div id="expenses" class="tab-content">
                <select id="expense-visualization-option">
                    <option value="monthly">Monthly</option>
                    <option value="quarterly">Quarterly</option>
                    <option value="yearly" selected>Yearly</option>
                </select>
                <canvas id="expensesChart"></canvas>
                <div>
                    <table id="expensesTable" border="1">
                        <tr>
                            <th></th>
                            <th>Year 1</th>
                            <th>Margin 1</th>
                            <th>Year 2</th>
                            <th>Margin 2</th>
                            <th>Year 3</th>
                            <th>Margin 3</th>
                            <th>Year 4</th>
                            <th>Margin 4</th>
                            <th>Year 5</th>
                            <th>Margin 5</th>
                        </tr>
                        <tr>
                            <td><strong>EXPENSES</strong></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;"><strong>FIXED EXPENSES</strong></td>
                            <td style="text-align: center;" class="fixedyear1"></td>
                            <td style="text-align: center;" class="fixedmargin1"></td>
                            <td style="text-align: center;" class="fixedyear2"></td>
                            <td style="text-align: center;" class="fixedmargin2"></td>
                            <td style="text-align: center;" class="fixedyear3"></td>
                            <td style="text-align: center;" class="fixedmargin3"></td>
                            <td style="text-align: center;" class="fixedyear4"></td>
                            <td style="text-align: center;" class="fixedmargin4"></td>
                            <td style="text-align: center;" class="fixedyear5"></td>
                            <td style="text-align: center;" class="fixedmargin5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;" class="fixed">fixed expense 1</td>
                            <td style="text-align: center;" class="fixedyear1"></td>
                            <td style="text-align: center;" class="fixedmargin1"></td>
                            <td style="text-align: center;" class="fixedyear2"></td>
                            <td style="text-align: center;" class="fixedmargin2"></td>
                            <td style="text-align: center;" class="fixedyear3"></td>
                            <td style="text-align: center;" class="fixedmargin3"></td>
                            <td style="text-align: center;" class="fixedyear4"></td>
                            <td style="text-align: center;" class="fixedmargin4"></td>
                            <td style="text-align: center;" class="fixedyear5"></td>
                            <td style="text-align: center;" class="fixedmargin5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;"><strong>R&D EXPENSES</strong></td>
                            <td style="text-align: center;" class="rAndDyear1"></td>
                            <td style="text-align: center;" class="rAndDmargin1"></td>
                            <td style="text-align: center;" class="rAndDyear2"></td>
                            <td style="text-align: center;" class="rAndDmargin2"></td>
                            <td style="text-align: center;" class="rAndDyear3"></td>
                            <td style="text-align: center;" class="rAndDmargin3"></td>
                            <td style="text-align: center;" class="rAndDyear4"></td>
                            <td style="text-align: center;" class="rAndDmargin4"></td>
                            <td style="text-align: center;" class="rAndDyear5"></td>
                            <td style="text-align: center;" class="rAndDmargin5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;" class="rAndD">R&D expense 1</td>
                            <td style="text-align: center;" class="rAndDyear1"></td>
                            <td style="text-align: center;" class="rAndDmargin1"></td>
                            <td style="text-align: center;" class="rAndDyear2"></td>
                            <td style="text-align: center;" class="rAndDmargin2"></td>
                            <td style="text-align: center;" class="rAndDyear3"></td>
                            <td style="text-align: center;" class="rAndDmargin3"></td>
                            <td style="text-align: center;" class="rAndDyear4"></td>
                            <td style="text-align: center;" class="rAndDmargin4"></td>
                            <td style="text-align: center;" class="rAndDyear5"></td>
                            <td style="text-align: center;" class="rAndDmargin5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;"><strong>SALES EXPENSES</strong></td>
                            <td style="text-align: center;" class="salesyear1"></td>
                            <td style="text-align: center;" class="salesmargin1"></td>
                            <td style="text-align: center;" class="salesyear2"></td>
                            <td style="text-align: center;" class="salesmargin2"></td>
                            <td style="text-align: center;" class="salesyear3"></td>
                            <td style="text-align: center;" class="salesmargin3"></td>
                            <td style="text-align: center;" class="salesyear4"></td>
                            <td style="text-align: center;" class="salesmargin4"></td>
                            <td style="text-align: center;" class="salesyear5"></td>
                            <td style="text-align: center;" class="salesmargin5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;" class="sales">Sales expense 1</td>
                            <td style="text-align: center;" class="salesyear1"></td>
                            <td style="text-align: center;" class="salesmargin1"></td>
                            <td style="text-align: center;" class="salesyear2"></td>
                            <td style="text-align: center;" class="salesmargin2"></td>
                            <td style="text-align: center;" class="salesyear3"></td>
                            <td style="text-align: center;" class="salesmargin3"></td>
                            <td style="text-align: center;" class="salesyear4"></td>
                            <td style="text-align: center;" class="salesmargin4"></td>
                            <td style="text-align: center;" class="salesyear5"></td>
                            <td style="text-align: center;" class="salesmargin5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;"><strong>MARKETING EXPENSES</strong></td>
                            <td style="text-align: center;" class="marketingyear1"></td>
                            <td style="text-align: center;" class="marketingmargin1"></td>
                            <td style="text-align: center;" class="marketingyear2"></td>
                            <td style="text-align: center;" class="marketingmargin2"></td>
                            <td style="text-align: center;" class="marketingyear3"></td>
                            <td style="text-align: center;" class="marketingmargin3"></td>
                            <td style="text-align: center;" class="marketingyear4"></td>
                            <td style="text-align: center;" class="marketingmargin4"></td>
                            <td style="text-align: center;" class="marketingyear5"></td>
                            <td style="text-align: center;" class="marketingmargin5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;" class="marketing">marketing expense 1</td>
                            <td style="text-align: center;" class="marketingyear1"></td>
                            <td style="text-align: center;" class="marketingmargin1"></td>
                            <td style="text-align: center;" class="marketingyear2"></td>
                            <td style="text-align: center;" class="marketingmargin2"></td>
                            <td style="text-align: center;" class="marketingyear3"></td>
                            <td style="text-align: center;" class="marketingmargin3"></td>
                            <td style="text-align: center;" class="marketingyear4"></td>
                            <td style="text-align: center;" class="marketingmargin4"></td>
                            <td style="text-align: center;" class="marketingyear5"></td>
                            <td style="text-align: center;" class="marketingmargin5"></td>
                        </tr>

                        <tr>
                            <td style="text-align: center;"><strong>STAFF EXPENSES</strong></td>
                            <td style="text-align: center;" class="staffyear1"></td>
                            <td style="text-align: center;" class="staffmargin1"></td>
                            <td style="text-align: center;" class="staffyear2"></td>
                            <td style="text-align: center;" class="staffmargin2"></td>
                            <td style="text-align: center;" class="staffyear3"></td>
                            <td style="text-align: center;" class="staffmargin3"></td>
                            <td style="text-align: center;" class="staffyear4"></td>
                            <td style="text-align: center;" class="staffmargin4"></td>
                            <td style="text-align: center;" class="staffyear5"></td>
                            <td style="text-align: center;" class="staffmargin5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;" class="staff">staff expense 1</td>
                            <td style="text-align: center;" class="staffyear1"></td>
                            <td style="text-align: center;" class="staffmargin1"></td>
                            <td style="text-align: center;" class="staffyear2"></td>
                            <td style="text-align: center;" class="staffmargin2"></td>
                            <td style="text-align: center;" class="staffyear3"></td>
                            <td style="text-align: center;" class="staffmargin3"></td>
                            <td style="text-align: center;" class="staffyear4"></td>
                            <td style="text-align: center;" class="staffmargin4"></td>
                            <td style="text-align: center;" class="staffyear5"></td>
                            <td style="text-align: center;" class="staffmargin5"></td>
                        </tr>



                        <tr>
                            <td style="text-align: center;"><strong>OTHER EXPENSES</strong></td>
                            <td style="text-align: center;" class="otheryear1"></td>
                            <td style="text-align: center;" class="othermargin1"></td>
                            <td style="text-align: center;" class="otheryear2"></td>
                            <td style="text-align: center;" class="othermargin2"></td>
                            <td style="text-align: center;" class="otheryear3"></td>
                            <td style="text-align: center;" class="othermargin3"></td>
                            <td style="text-align: center;" class="otheryear4"></td>
                            <td style="text-align: center;" class="othermargin4"></td>
                            <td style="text-align: center;" class="otheryear5"></td>
                            <td style="text-align: center;" class="othermargin5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;" class="other">Other expense 1</td>
                            <td style="text-align: center;" class="otheryear1"></td>
                            <td style="text-align: center;" class="othermargin1"></td>
                            <td style="text-align: center;" class="otheryear2"></td>
                            <td style="text-align: center;" class="othermargin2"></td>
                            <td style="text-align: center;" class="otheryear3"></td>
                            <td style="text-align: center;" class="othermargin3"></td>
                            <td style="text-align: center;" class="otheryear4"></td>
                            <td style="text-align: center;" class="othermargin4"></td>
                            <td style="text-align: center;" class="otheryear5"></td>
                            <td style="text-align: center;" class="othermargin5"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td><strong>TOTAL EXPENSES</strong></td>
                            <td style="text-align: center;" class="totalyear1"></td>
                            <td style="text-align: center;" class="totalmargin1"></td>
                            <td style="text-align: center;" class="totalyear2"></td>
                            <td style="text-align: center;" class="totalmargin2"></td>
                            <td style="text-align: center;" class="totalyear3"></td>
                            <td style="text-align: center;" class="totalmargin3"></td>
                            <td style="text-align: center;" class="totalyear4"></td>
                            <td style="text-align: center;" class="totalmargin4"></td>
                            <td style="text-align: center;" class="totalyear5"></td>
                            <td style="text-align: center;" class="totalmargin5"></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div id="profit" class="tab-content">
                <canvas id="netIncomeChart"></canvas>
                <div>
                    <table id="profitTable" border="1">
                        <tr>
                            <th></th>
                            <th>Year 1</th>
                            <th>Year 2</th>
                            <th>Year 3</th>
                            <th>Year 4</th>
                            <th>Year 5</th>
                        </tr>
                        <tr>
                            <td><strong>EBITDA</strong></td>
                            <td style="text-align: center;" class="EBITDAyear1"></td>
                            <td style="text-align: center;" class="EBITDAyear2"></td>
                            <td style="text-align: center;" class="EBITDAyear3"></td>
                            <td style="text-align: center;" class="EBITDAyear4"></td>
                            <td style="text-align: center;" class="EBITDAyear5"></td>
                        </tr>

                        <tr>
                            <td style="text-align: center;">Depreciation & Amortization</td>
                            <td style="text-align: center;" class="Depreciationyear1"></td>
                            <td style="text-align: center;" class="Depreciationyear2"></td>
                            <td style="text-align: center;" class="Depreciationyear3"></td>
                            <td style="text-align: center;" class="Depreciationyear4"></td>
                            <td style="text-align: center;" class="Depreciationyear5"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td><strong>Operating Profit (EBIT)</strong></td>
                            <td style="text-align: center;" class="EBITyear1"></td>
                            <td style="text-align: center;" class="EBITyear2"></td>
                            <td style="text-align: center;" class="EBITyear3"></td>
                            <td style="text-align: center;" class="EBITyear4"></td>
                            <td style="text-align: center;" class="EBITyear5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">Interest Expense</td>
                            <td style="text-align: center;" class="interestyear1"></td>
                            <td style="text-align: center;" class="interestyear2"></td>
                            <td style="text-align: center;" class="interestyear3"></td>
                            <td style="text-align: center;" class="interestyear4"></td>
                            <td style="text-align: center;" class="interestyear5"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td><strong>Earnings before Tax (EBT)</strong></td>
                            <td style="text-align: center;" class="EBTyear1"></td>
                            <td style="text-align: center;" class="EBTyear2"></td>
                            <td style="text-align: center;" class="EBTyear3"></td>
                            <td style="text-align: center;" class="EBTyear4"></td>
                            <td style="text-align: center;" class="EBTyear5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">Tax</td>
                            <td style="text-align: center;" class="taxyear1"></td>
                            <td style="text-align: center;" class="taxyear2"></td>
                            <td style="text-align: center;" class="taxyear3"></td>
                            <td style="text-align: center;" class="taxyear4"></td>
                            <td style="text-align: center;" class="taxyear5"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td><strong>NET INCOME (LOSS)</strong></td>
                            <td style="text-align: center;" class="netIncomeLossyear1"></td>
                            <td style="text-align: center;" class="netIncomeLossyear2"></td>
                            <td style="text-align: center;" class="netIncomeLossyear3"></td>
                            <td style="text-align: center;" class="netIncomeLossyear4"></td>
                            <td style="text-align: center;" class="netIncomeLossyear5"></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div id="projected-needs" class="tab-content">
                <canvas id="netIncreaseInCashChart"></canvas>
                <div>
                    <table id="needsTable" border="1">
                        <tr>
                            <th></th>
                            <th>Year 1</th>
                            <th>Year 2</th>
                            <th>Year 3</th>
                            <th>Year 4</th>
                            <th>Year 5</th>
                        </tr>
                        <tr>
                            <td><strong>Adjustments to Cash used by Operating Activities</strong></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">Depreciation</td>
                            <td style="text-align: center;" class="needsDepreciationyear1"></td>
                            <td style="text-align: center;" class="needsDepreciationyear2"></td>
                            <td style="text-align: center;" class="needsDepreciationyear3"></td>
                            <td style="text-align: center;" class="needsDepreciationyear4"></td>
                            <td style="text-align: center;" class="needsDepreciationyear5"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">(Increase) decrease in A/R + Other Assets</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">(Increase) decrease in Inventory</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">(decrease) increase in A/P - COGS/Inventory</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">(Increase) decrease in A/P - Other Expenses</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                            <td style="text-align: center;">NA</td>
                        </tr>
                        <tr>
                            <td><strong>Total Adjustments</strong></td>
                            <td style="text-align: center;" class="needsDepreciationyear1"></td>
                            <td style="text-align: center;" class="needsDepreciationyear2"></td>
                            <td style="text-align: center;" class="needsDepreciationyear3"></td>
                            <td style="text-align: center;" class="needsDepreciationyear4"></td>
                            <td style="text-align: center;" class="needsDepreciationyear5"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td><strong>Investment Activities</strong></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">Capital asset purchase 1</td>
                            <td style="text-align: center;" class="capitalassetpurchaseyear1"></td>
                            <td style="text-align: center;" class="capitalassetpurchaseyear2"></td>
                            <td style="text-align: center;" class="capitalassetpurchaseyear3"></td>
                            <td style="text-align: center;" class="capitalassetpurchaseyear4"></td>
                            <td style="text-align: center;" class="capitalassetpurchaseyear5"></td>
                        </tr>
                        <tr>
                            <td><strong>Net Cash Used in Investing</strong></td>
                            <td style="text-align: center;" class="capitalassetpurchaseyear1"></td>
                            <td style="text-align: center;" class="capitalassetpurchaseyear2"></td>
                            <td style="text-align: center;" class="capitalassetpurchaseyear3"></td>
                            <td style="text-align: center;" class="capitalassetpurchaseyear4"></td>
                            <td style="text-align: center;" class="capitalassetpurchaseyear5"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td><strong>Financing Activities</strong></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">Shareholder contribution 1</td>
                            <td style="text-align: center;" class="shareholdercontributionyear1"></td>
                            <td style="text-align: center;" class="shareholdercontributionyear2"></td>
                            <td style="text-align: center;" class="shareholdercontributionyear3"></td>
                            <td style="text-align: center;" class="shareholdercontributionyear4"></td>
                            <td style="text-align: center;" class="shareholdercontributionyear5"></td>
                        </tr>
                        <tr>
                            <td><strong>Net Cash Provided by Financing Activities</strong></td>
                            <td style="text-align: center;" class="shareholdercontributionyear1"></td>
                            <td style="text-align: center;" class="shareholdercontributionyear2"></td>
                            <td style="text-align: center;" class="shareholdercontributionyear3"></td>
                            <td style="text-align: center;" class="shareholdercontributionyear4"></td>
                            <td style="text-align: center;" class="shareholdercontributionyear5"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                            <td style="text-align: center;"></td>
                        </tr>
                        <tr>
                            <td><strong>Net increase (decrease) in cash</strong></td>
                            <td style="text-align: center;" class = "netIncreaseInCashyear1"></td>
                            <td style="text-align: center;" class = "netIncreaseInCashyear2"></td>
                            <td style="text-align: center;" class = "netIncreaseInCashyear3"></td>
                            <td style="text-align: center;" class = "netIncreaseInCashyear4"></td>
                            <td style="text-align: center;" class = "netIncreaseInCashyear5"></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div id="testing" class="tab-content">
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        $(document).ready(function () {



            function updateRevenueTable() {
                let yearlyRevenue = formData.rev_yearly;

                if (yearlyRevenue.length === 5) {
                    yearlyRevenue.forEach((revenue, index) => {
                        const roundedRevenue = Math.round(revenue); // Round the revenue to the nearest whole number

                        // Update the total revenue cell
                        $(`#totalRevenueYear${index + 1}`).text(roundedRevenue);

                        // Update the category row cell
                        $(`#revenueTable tr:nth-child(3) td:nth-child(${(index * 2) + 2})`).text(roundedRevenue);

                        // Update the product/service row cell
                        $(`#revenueTable tr:nth-child(4) td:nth-child(${(index * 2) + 2})`).text(roundedRevenue);
                    });
                } else {
                    console.error('Yearly revenue data is not in the expected format.');
                }
            }

            $('.plus-icon[data-purpose="fixedExpense"]').click(function () {
                // Define the structure of the new input fields for fixed expenses
                var newExpenseHTML = `
            <div class="assumption-line fixed-expenses-specific">
                <input type="text" class="short-input" placeholder="Name" id="fixed-expense-name">
                <input type="number" class="short-input" placeholder="Amount" id="fixed-expense">
                <label>Month:</label>
                <input type="number" class="short-input" placeholder="Month" id="fixed-expense-month">
            </div>
        `;

                // Append the new input fields after the last '.fixed-expenses-specific' element
                $('.fixed-expenses-specific:last').after(newExpenseHTML);
            });

            $('.plus-icon[data-purpose="rAndDExpense"]').click(function () {
                // Define the structure of the new input fields for fixed expenses
                var newExpenseHTML = `
            <div class="assumption-line rAndD-expenses-specific">
                <input type="text" class="short-input" placeholder="Name" id="rAndD-expense-name">
                <input type="number" class="short-input" placeholder="Amount" id="rAndD-expense">
                <label>Month:</label>
                <input type="number" class="short-input" placeholder="Month" id="rAndD-expense-month">
            </div>
        `;


                $('.rAndD-expenses-specific:last').after(newExpenseHTML);
            });

            $('.plus-icon[data-purpose="salesExpense"]').click(function () {
                // Define the structure of the new input fields for fixed expenses
                var newExpenseHTML = `
            <div class="assumption-line sales-expenses-specific">
                <input type="text" class="short-input" placeholder="Name" id="sales-expense-name">
                <input type="number" class="short-input" placeholder="Amount" id="sales-expense">
                <label>Month:</label>
                <input type="number" class="short-input" placeholder="Month" id="sales-expense-month">
            </div>
        `;


                $('.sales-expenses-specific:last').after(newExpenseHTML);
            });

            $('.plus-icon[data-purpose="marketingExpense"]').click(function () {
                // Define the structure of the new input fields for fixed expenses
                var newExpenseHTML = `
            <div class="assumption-line marketing-expenses-specific">
                <input type="text" class="short-input" placeholder="Name" id="marketing-expense-name">
                <input type="number" class="short-input" placeholder="Amount" id="marketing-expense">
                <label>Month:</label>
                <input type="number" class="short-input" placeholder="Month" id="marketing-expense-month">
            </div>
        `;


                $('.marketing-expenses-specific:last').after(newExpenseHTML);
            });

            $('.plus-icon[data-purpose="staffExpense"]').click(function () {
                // Define the structure of the new input fields for fixed expenses
                var newExpenseHTML = `
            <div class="assumption-line staff-expenses-specific">
                <input type="text" class="short-input" placeholder="Name" id="staff-expense-name">
                <input type="number" class="short-input" placeholder="Amount" id="staff-expense-amount">
                <input type="number" class="short-input" placeholder="Months Working" id="staff-expense-months-working">
                <label>Month:</label>
                <input type="number" class="short-input" placeholder="Month" id="staff-expense-month">
                    
            </div>
        `;


                $('.staff-expenses-specific:last').after(newExpenseHTML);
            });

            $('.plus-icon[data-purpose="otherExpense"]').click(function () {
                // Define the structure of the new input fields for fixed expenses
                var newExpenseHTML = `
            <div class="assumption-line other-expenses-specific">
                <input type="text" class="short-input" placeholder="Name" id="other-expense-name">
                <input type="number" class="short-input" placeholder="Amount" id="other-expense">
                <label>Month:</label>
                <input type="number" class="short-input" placeholder="Month" id="other-expense-month">
            </div>
        `;


                $('.other-expenses-specific:last').after(newExpenseHTML);
            });

            // Function to toggle visibility of 'flat fee per sale' and '% of sale' fields
            function toggleRevenueShareFields() {
                if ($('#i-am-paid-dropdown').val() === 'share of revenue') {
                    // Show fields related to 'share of revenue'
                    $('.share-of-revenue-specific').show();
                } else {
                    // Hide fields and reset checkboxes if 'share of revenue' is not selected
                    $('.share-of-revenue-specific').hide();
                    $('#flat-fee-per-sale-checkbox').prop('checked', false).change();
                    $('#percentage-of-sale-checkbox').prop('checked', false).change();
                }
            }



            // Listen for changes on the dropdown to toggle the fields
            $('#i-am-paid-dropdown').change(toggleRevenueShareFields);

            // Handlers for checkbox changes to show/hide input fields
            $('#flat-fee-per-sale-checkbox').change(function () {
                if ($(this).is(':checked')) {
                    $('#flat-fee-per-sale-input').show();
                } else {
                    $('#flat-fee-per-sale-input').hide();
                }
            });

            $('#percentage-of-sale-checkbox').change(function () {
                if ($(this).is(':checked')) {
                    $('#percentage-of-sale-input').show();
                } else {
                    $('#percentage-of-sale-input').hide();
                }
            });


            // Function to toggle visibility of recurring payment fields
            function toggleRecurringPaymentFields() {
                if ($('#customer-pay-dropdown').val() === 'recurring payments') {
                    $('#recurring-price-field').show();
                    $('#recurring-payment-frequency-field').show();
                } else {
                    $('#recurring-price-field').hide();
                    $('#recurring-payment-frequency-field').hide();
                }
            }

            // Listen for changes on the dropdown to toggle the fields
            $('#customer-pay-dropdown').change(toggleRecurringPaymentFields);


            function calculateRevenue(startingMonth, upfrontPricePerUnit, annualInflation, yearlyPriceIncreases, month1Sales, yearlyGrowthRates) {
                let monthlyRevenue = new Array(60).fill(0);
                let quarterlyRevenue = new Array(20).fill(0);
                let yearlyRevenue = new Array(5).fill(0);
                let sales = new Array(60).fill(0);
                let pricePerUnit = new Array(60).fill(upfrontPricePerUnit);
                let overallCustomers = 0;

                sales[startingMonth] = month1Sales;
                overallCustomers += month1Sales;

                for (let year = 0; year < 5; year++) {
                    let startMonthOfYear = startingMonth + year * 12;
                    for (let month = startMonthOfYear; month < startMonthOfYear + 12 && month < 60; month++) {
                        if (year > 0) {
                            pricePerUnit[month] = pricePerUnit[month - 12] * (1 + annualInflation + (yearlyPriceIncreases[year - 1] || 0));
                        }
                    }
                }

                for (let year = 0; year < 5; year++) {
                    let yearStart = startingMonth + year * 12;
                    for (let month = 0; month < 12; month++) {
                        let currentMonthIndex = yearStart + month;
                        if (currentMonthIndex >= 60) break;

                        if (year > 0 && month === 0) {
                            sales[currentMonthIndex] = sales[currentMonthIndex - 1] * (1 + yearlyGrowthRates[year]);
                        } else if (month > 0 && yearlyGrowthRates[year] !== null) {
                            sales[currentMonthIndex] = sales[currentMonthIndex - 1] * (1 + yearlyGrowthRates[year]);
                        }

                        if (sales[currentMonthIndex] !== undefined) {
                            overallCustomers += sales[currentMonthIndex];
                            monthlyRevenue[currentMonthIndex] = sales[currentMonthIndex] * pricePerUnit[currentMonthIndex];
                        }
                    }
                }

                for (let month = 0; month < 60; month++) {
                    let quarterIndex = Math.floor(month / 3);
                    quarterlyRevenue[quarterIndex] += monthlyRevenue[month];

                    let yearIndex = Math.floor(month / 12);
                    yearlyRevenue[yearIndex] += monthlyRevenue[month];
                }

                return {
                    monthlyRevenue,
                    quarterlyRevenue,
                    yearlyRevenue
                };
            }

            $('input[type="number"], input[type="text"]').on('input', function () {
                collectFormData();
                updateSum();
            });


            $('.plus-icon').click(function () {
                // Determine which year's "+" icon was clicked
                var yearClass = $(this).attr('class').split(' ').find(c => c.startsWith('year'));
                // Toggle the visibility of all divs associated with that year
                $('.assumption-line.' + yearClass).toggle();
            });

            // Object to store the collected data
            let formData = {
                iAmSelling: null,
                customerPay: null,
                iAmPaid: null,
                receivesFlatFee: false,
                receivesPercentageOfSale: false,
                flatFeePerSale: null,
                percentageOfSale: null,
                startingMonth: null,
                upfrontPricePerUnit: null,
                recurringPrice: null,
                recurringPaymentFrequency: null,
                annualInflation: null,
                yearlyPriceIncreases: [],
                month1Sales: null,
                yearlyGrowthRates: [],
                costPricePerUnit: null,
                shippingLocalCostPerUnit: null,
                yearlyCOGS: null,
                sum: null,
                rev_monthly: [],
                rev_yearly: [],
                rev_quarterly: [],
                fixedExpenseName: null,
                fixedExpense: null,
                fixedExpenseMonth: [],
                //fixedExpenseMonth: null,
                rAndDExpenseName: null,
                rAndDExpense: null,
                rAndDExpenseMonth: [],
                salesExpenseName: null,
                salesExpense: null,
                salesExpenseMonth: [],
                marketingExpenseName: null,
                marketingExpense: null,
                marketingExpenseMonth: [],
                staffExpenseName: null,
                staffExpense: null,
                staffExpenseMonth: [],
                otherExpenseName: null,
                otherExpense: null,
                otherExpenseMonth: [],
                totalExpenses: null,
                assetName: null,
                assetAmount: null,
                assetMonth: null,
                assetLifespan: null,
                assetLifespanPer: null,
                loanName: null,
                loanAmount: null,
                loanMonth: null,
                loanInterest: null,
                loanInterestPer: null,
                taxAmount: null,
                shareholderName: null,
                shareholderAmount: null,
                shareholderMonth: null,
                capitalAssetName: null,
                capitalAssetAmount: null,
                capitalAssetMonth: null,
            };

            // Collect values from inputs and checkboxes
            function collectFormData() {
                // Assets
                formData.assetName = $('#asset-name').val() || null;
                formData.assetAmount = parseFloat($('#asset-amount').val()) || 0;
                formData.assetMonth = parseInt($('#asset-month').val()) || null;
                formData.assetLifespan = parseInt($('#asset-lifespan').val()) || null;
                formData.assetLifespanPer = $('#asset-lifespan-dropdown').val();

                // Loans
                formData.loanName = $('#loan-name').val() || null;
                formData.loanAmount = parseFloat($('#loan-amount').val()) || 0;
                formData.loanMonth = parseInt($('#loan-month').val()) || null;
                formData.loanInterest = parseFloat($('#loan-interest').val()) || 0;
                formData.loanInterestPer = $('#loan-interest-dropdown').val();

                // Corporate Tax
                formData.taxAmount = parseFloat($('#tax-amount').val()) || 0;

                // Shareholder Contributions
                formData.shareholderName = $('#shareholder-name').val() || null;
                formData.shareholderAmount = parseFloat($('#shareholder-amount').val()) || 0;
                formData.shareholderMonth = parseInt($('#shareholder-month').val()) || null;

                // capital assests 
                formData.capitalAssetName = $('#capital-asset-name').val() || null;
                formData.capitalAssetAmount = parseFloat($('#capital-asset-amount').val()) || 0;
                formData.capitalAssetMonth = parseInt($('#capital-asset-month').val()) || null;


                formData.fixedExpenseName = $('#fixed-expense-name').val() || null;
                formData.rAndDExpenseName = $('#rAndD-expense-name').val() || null;
                formData.salesExpenseName = $('#sales-expense-name').val() || null;
                formData.marketingExpenseName = $('#marketing-expense-name').val() || null;
                formData.otherExpenseName = $('#other-expense-name').val() || null;

                formData.costPricePerUnit = parseFloat($('#costPricePerUnit').val()) || 0;
                formData.shippingLocalCostPerUnit = parseFloat($('#shippingLocalCostPerUnit').val()) || 0;



                // Capture 'Recurring price' and 'Frequency of recurring payments'
                formData.recurringPrice = parseFloat($('#recurring-price').val()) || null;
                formData.recurringPaymentFrequency = $('#recurring-payment-frequency').val();


                if (formData.receivesFlatFee) {
                    formData.flatFeePerSale = parseFloat($('#flat-fee-per-sale-input').val()) || null;
                } else {
                    formData.flatFeePerSale = null; // Reset if checkbox is not checked
                }

                if (formData.receivesPercentageOfSale) {
                    formData.percentageOfSale = parseFloat($('#percentage-of-sale-input').val()) || null;
                } else {
                    formData.percentageOfSale = null; // Reset if checkbox is not checked
                }

                formData.receivesFlatFee = $('#flat-fee-per-sale-checkbox').is(':checked');
                formData.receivesPercentageOfSale = $('#percentage-of-sale-checkbox').is(':checked');


                formData.iAmSelling = $('#product-service-dropdown').val();
                formData.customerPay = $('#customer-pay-dropdown').val();
                formData.iAmPaid = $('#i-am-paid-dropdown').val();


                formData.startingMonth = parseInt($('#revenue-start-month').val());
                formData.upfrontPricePerUnit = parseFloat($('#initial-price').val());
                formData.annualInflation = parseFloat($('#inflation').val());
                formData.yearlyPriceIncreases = [
                    parseFloat($('#price-year-2').val()),
                    parseFloat($('#price-year-3').val()),
                    parseFloat($('#price-year-4').val()),
                    parseFloat($('#price-year-5').val())
                ].filter(n => !isNaN(n)); // Filter out non-numeric values
                formData.month1Sales = parseInt($('#new-customers-month1').val());
                formData.yearlyGrowthRates = [
                    parseFloat($('#growth-rate-year1').val()),
                    parseFloat($('#growth-rate-year2').val()),
                    parseFloat($('#growth-rate-year3').val()),
                    parseFloat($('#growth-rate-year4').val()),
                    parseFloat($('#growth-rate-year5').val())
                ].filter(n => !isNaN(n)); // Filter out non-numeric values


                formData.fixedExpense = parseFloat($('#fixed-expense').val()) || 0;
                formData.fixedExpenseMonth = $('#fixed-expense-month').val().split(',').map(Number).filter(n => !isNaN(n) && n >= 1 && n <= 60);

                formData.rAndDExpense = parseFloat($('#rAndD-expense').val()) || 0;
                formData.rAndDExpenseMonth = $('#rAndD-expense-month').val().split(',').map(Number).filter(n => !isNaN(n) && n >= 1 && n <= 60);

                // Sales Expenses
                formData.salesExpense = parseFloat($('#sales-expense').val()) || 0;
                formData.salesExpenseMonth = $('#sales-expense-month').val().split(',').map(Number).filter(n => !isNaN(n) && n >= 1 && n <= 60);

                // Marketing Expenses
                formData.marketingExpense = parseFloat($('#marketing-expense').val()) || 0;
                formData.marketingExpenseMonth = $('#marketing-expense-month').val().split(',').map(Number).filter(n => !isNaN(n) && n >= 1 && n <= 60);

                // staff Expenses
                formData.staffExpenseName = $('#staff-expense-name').val() || null;
                formData.staffExpense = parseFloat($('#staff-expense-amount').val()) || 0;
                formData.staffExpenseMonth = $('#staff-expense-month').val().split(',').map(Number).filter(n => !isNaN(n) && n >= 1 && n <= 60);

                // Other Expenses
                formData.otherExpense = parseFloat($('#other-expense').val()) || 0;
                formData.otherExpenseMonth = $('#other-expense-month').val().split(',').map(Number).filter(n => !isNaN(n) && n >= 1 && n <= 60);

                var expensesData = calculateExpenses(formData);
                formData.salesExpensesArray = expensesData.salesExpensesArray;
                formData.marketingExpensesArray = expensesData.marketingExpensesArray;
                formData.rAndDExpensesArray = expensesData.rAndDExpensesArray;
                formData.fixedExpensesArray = expensesData.fixedExpensesArray;
                formData.otherExpensesArray = expensesData.otherExpensesArray;
                formData.staffExpensesArray = expensesData.staffExpensesArray;
                formData.totalExpensesArray = expensesData.totalExpensesArray;
            }

            // Function to calculate and update revenue
            function updateSum() {
                // Ensure all necessary data is collected
                collectFormData();


                let revenueResults = calculateRevenue(
                    formData.startingMonth,
                    formData.upfrontPricePerUnit,
                    formData.annualInflation,
                    formData.yearlyPriceIncreases,
                    formData.month1Sales,
                    formData.yearlyGrowthRates
                );

                formData.rev_yearly = revenueResults.yearlyRevenue;
                formData.rev_monthly = revenueResults.monthlyRevenue;
                formData.rev_quarterly = revenueResults.quarterlyRevenue;


                const yearlyCOGS = calculateYearlyCOGS(formData);


                updateCOGSTable(yearlyCOGS);

                displayFormData();
                visualizeRevenue();
                updateExpensesChart();

                updateRevenueTable();

                calculateMarginsAndUpdateTable();

                updateGrossProfitLossAndMargin();

                updateRevenueMargins();

                updateExpenseTableNames();

                updateExpensesAndMargins(formData);

                visualizeNetIncomeLoss();

                updateProfitTable();
                updateNeedsTable();
                visualizeNetIncreaseInCash();
            }






            let currentChart = null; // Variable to keep track of the current chart instance

            // Function to destroy the current chart if it exists
            function clearChart() {
                if (currentChart != null) {
                    currentChart.destroy(); // Destroy the current chart instance
                    currentChart = null; // Reset the currentChart variable
                }
            }

            $('#revenue-visualization-option').change(function () {
                // Call the visualization function whenever the selection changes
                visualizeRevenue();
            });

            function visualizeRevenue() {
                clearChart(); // Clear any existing chart

                // Ensure that revenue data is prepared correctly
                if (!formData.rev_monthly || formData.rev_monthly.length === 0) {
                    console.error('Revenue data is not available for visualization.');
                    return; // Exit the function if revenue data is not ready
                }

                const visualizationOption = $('#revenue-visualization-option').val();

                let labels = [];
                let datasets = []; // Use an array to hold multiple datasets

                // Prepare labels and data based on the selected visualization option
                switch (visualizationOption) {
                    case 'yearly':
                        labels = formData.rev_yearly.map((_, index) => `Year ${index + 1}`);
                        // Main dataset for revenue
                        datasets.push({
                            type: 'bar',
                            label: 'Calculated Revenue',
                            data: formData.rev_yearly,
                            backgroundColor: 'blue',
                            borderColor: 'black',
                            borderWidth: 1
                        });

                        // Calculate margin percentages
                        const marginPercentages = formData.rev_yearly.map((revenue, index) => {
                            if (revenue === 0) return 0; // Avoid division by zero
                            const grossProfitLoss = revenue - parseFloat($(`.totalCOGSYear${index + 1}`).text());
                            return (grossProfitLoss / revenue) * 100;
                        });
                        datasets.push({
                            type: 'line', // Line chart for margins
                            label: 'Gross Profit (Loss) Margin (%)',
                            data: marginPercentages,
                            borderColor: 'red',
                            borderWidth: 2,
                            fill: false,
                            yAxisID: 'y-axis-margin'
                        });
                        break;
                    case 'monthly':
                        labels = formData.rev_monthly.map((_, index) => `Month ${index + 1}`);
                        datasets.push({
                            label: 'Calculated Revenue',
                            data: formData.rev_monthly,
                            backgroundColor: 'blue',
                            borderColor: 'black',
                            borderWidth: 1
                        });
                        break;
                    case 'quarterly':
                        labels = formData.rev_quarterly.map((_, index) => `Quarter ${index + 1}`);
                        datasets.push({
                            label: 'Calculated Revenue',
                            data: formData.rev_quarterly,
                            backgroundColor: 'blue',
                            borderColor: 'black',
                            borderWidth: 1
                        });
                        break;
                    default:
                        console.error('Invalid visualization option.');
                        return;
                }

                const ctx = document.getElementById('revenueChart').getContext('2d');
                currentChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: datasets
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                position: 'left',
                                id: 'y-axis-revenue'
                            },
                            'y-axis-margin': {
                                type: 'linear',
                                display: visualizationOption === 'yearly',
                                position: 'right',
                                id: 'y-axis-margin',
                                grid: {
                                    drawOnChartArea: false
                                }
                            }
                        }
                    }
                });
            }


            visualizeRevenue();

            function calculateExpenses(formData) {
                // Initialize arrays for 5 types of expenses and a total array for all expenses
                let salesExpensesArray = new Array(60).fill(0);
                let marketingExpensesArray = new Array(60).fill(0);
                let rAndDExpensesArray = new Array(60).fill(0);
                let fixedExpensesArray = new Array(60).fill(0);
                let staffExpensesArray = new Array(60).fill(0);
                let otherExpensesArray = new Array(60).fill(0);
                let totalExpensesArray = new Array(60).fill(0);

                // A helper function to distribute expenses over multiple months
                const distributeExpenses = (expenseArray, expenseAmount, expenseMonths) => {
                    expenseMonths.forEach(month => {
                        if (month >= 1 && month <= 60) { // Ensure month is within valid range
                            expenseArray[month - 1] += expenseAmount;
                        }
                    });
                };

                // Apply the helper function for each type of expense
                if (formData.fixedExpense && formData.fixedExpenseMonth.length) {
                    distributeExpenses(fixedExpensesArray, formData.fixedExpense, formData.fixedExpenseMonth);
                }
                if (formData.salesExpense && formData.salesExpenseMonth.length) {
                    distributeExpenses(salesExpensesArray, formData.salesExpense, formData.salesExpenseMonth);
                }
                if (formData.marketingExpense && formData.marketingExpenseMonth.length) {
                    distributeExpenses(marketingExpensesArray, formData.marketingExpense, formData.marketingExpenseMonth);
                }
                if (formData.rAndDExpense && formData.rAndDExpenseMonth.length) {
                    distributeExpenses(rAndDExpensesArray, formData.rAndDExpense, formData.rAndDExpenseMonth);
                }
                if (formData.otherExpense && formData.otherExpenseMonth.length) {
                    distributeExpenses(otherExpensesArray, formData.otherExpense, formData.otherExpenseMonth);
                }
                if (formData.staffExpense && formData.staffExpenseMonth.length) {
                    distributeExpenses(staffExpensesArray, formData.staffExpense, formData.staffExpenseMonth);
                }

                // Calculate the total expenses for each month
                for (let i = 0; i < 60; i++) {
                    totalExpensesArray[i] = salesExpensesArray[i] + marketingExpensesArray[i] + rAndDExpensesArray[i] + fixedExpensesArray[i] + otherExpensesArray[i] + staffExpensesArray[i];
                }

                return {
                    salesExpensesArray,
                    marketingExpensesArray,
                    rAndDExpensesArray,
                    fixedExpensesArray,
                    otherExpensesArray,
                    staffExpensesArray,
                    totalExpensesArray
                };
            }



            // Display collected data in the Revenue tab
            function displayFormData() {
                let displayArea = $('#testing');
                displayArea.empty(); // Clear previous content

                // Displaying calculated expense arrays along with other form data
                Object.keys(formData).forEach(key => {
                    if (Array.isArray(formData[key])) {
                        // For arrays, join the values for display
                        displayArea.append($('<p>').text(`${key}: ${formData[key].join(', ')}`));
                    } else {
                        // For regular values, display them directly
                        displayArea.append($('<p>').text(`${key}: ${formData[key] || 'N/A'}`));
                    }
                });
            }


            // Function to calculate yearly cost of goods sold (COGS)
            function calculateYearlyCOGS(formData) {
                const yearlyCOGS = [];

                let previousQuantity = formData.month1Sales; // Initialize with month1Sales for the first year

                for (let year = 0; year < 5; year++) {
                    // Calculate quantity sold for the year based on cumulative growth rate
                    const growthRate = formData.yearlyGrowthRates[year] || 0;
                    const quantitySold = previousQuantity * (1 + growthRate / 100); // Convert growth rate to a percentage

                    // Update previousQuantity for the next year
                    previousQuantity = quantitySold;

                    // Calculate total cost of goods sold for the year
                    const costPricePerUnit = formData.costPricePerUnit;
                    const shippingLocalCostPerUnit = formData.shippingLocalCostPerUnit;
                    const totalCOGS = quantitySold * (costPricePerUnit + shippingLocalCostPerUnit);

                    // Add the yearly COGS to the array
                    yearlyCOGS.push(totalCOGS);
                }

                return yearlyCOGS;
            }

            function updateCOGSTable(yearlyCOGS) {
                // Ensure that the COGS data array is of the expected length
                if (yearlyCOGS.length === 5) {
                    yearlyCOGS.forEach((cogs, index) => {
                        // Assuming the table cells for COGS are in order and have specific IDs or a class
                        // Here, we are directly selecting the cells based on an assumed ID pattern
                        $(`.totalCOGSYear${index + 1}`).text(cogs.toFixed(2)); // Format COGS to 2 decimal places and update the cell
                    });
                } else {
                    console.error('Yearly COGS data is not in the expected format.');
                }
            }

            function calculateMarginsAndUpdateTable() {
                // Ensure formData.rev_yearly and yearlyCOGS are correctly updated before this function
                let yearlyRevenue = formData.rev_yearly;

                // Calculate and update margins for each year
                yearlyRevenue.forEach((revenue, index) => {
                    if (revenue > 0) { // Prevent division by zero
                        // Assuming you have a similar function or logic to calculate yearlyCOGS
                        const cogs = parseFloat($(`.totalCOGSYear${index + 1}`).text());
                        const margin = cogs / revenue * 100; // Calculate the margin
                        $(`.marginCOGSYear${index + 1}`).text(margin.toFixed(2) + "%"); // Update the margin cell, formatted to 2 decimal places
                    } else {
                        $(`.marginCOGSYear${index + 1}`).text('N/A'); // If revenue is 0 or not set, mark as N/A
                    }
                });
            }

            // Call the function to calculate and update margins whenever necessary,
            // such as after revenue or COGS values are updated.
            calculateMarginsAndUpdateTable();

            function updateGrossProfitLossAndMargin() {
                // Loop through each year
                for (let year = 1; year <= 5; year++) {
                    // Retrieve the revenue for the year from the formData object
                    const revenue = formData.rev_yearly[year - 1];

                    // Retrieve the total COGS for the year from the appropriate table cell
                    const totalCOGS = parseFloat($(`.totalCOGSYear${year}`).text());

                    // Calculate Gross Profit (Loss) by subtracting total COGS from revenue
                    const grossProfitLoss = revenue - totalCOGS;

                    // Update the Gross Profit (Loss) field for the year
                    $(`.GPLYear${year}`).text(grossProfitLoss.toFixed(2));

                    // Calculate Gross Profit Margin
                    let grossProfitMargin = 0;
                    if (revenue > 0) { // Avoid division by zero
                        grossProfitMargin = (grossProfitLoss / revenue) * 100;
                    }

                    // Update the Gross Profit Margin field for the year
                    $(`.GPLYear${year}Margin`).text(grossProfitMargin.toFixed(2) + '%');
                }
            }

            function updateRevenueMargins() {
                // Assuming formData.rev_yearly is already populated
                let rev_yearly = formData.rev_yearly; // This array holds the yearly revenue values

                for (let year = 1; year <= 5; year++) {
                    // Retrieve the total revenue for the year from the ID
                    let totalRevenue = parseFloat($(`#totalRevenueYear${year}`).text());

                    // Calculate the margin percentage
                    let marginPercentage = 0;
                    if (rev_yearly[year - 1] > 0) { // Avoid division by zero
                        marginPercentage = (totalRevenue / rev_yearly[year - 1]) * 100;
                    }

                    // Update the revenue margin cell
                    $(`.revenueMargin${year}`).text(marginPercentage.toFixed(2) + "%"); // Format to 2 decimal places
                }
            }

            function updateExpenseTableNames() {
                // Use the collected formData names to update the table cells
                if (formData.rAndDExpenseName) {
                    // If there's a name provided, update the R&D expense name cell
                    $('.rAndD').text(formData.rAndDExpenseName);
                }

                if (formData.marketingExpenseName) {
                    // If there's a name provided, update the marketing expense name cell
                    $('.marketing').text(formData.marketingExpenseName);
                }

                if (formData.salesExpenseName) {
                    // If there's a name provided, update the sales expense name cell
                    $('.sales').text(formData.salesExpenseName);
                }

                if (formData.fixedExpenseName) {
                    // Assuming there's a specific class or method to target the fixed expense name cell
                    // Since the provided HTML doesn't include a cell with class "fixed" for the name, you might need to adjust this part
                    $('.fixed').text(formData.fixedExpenseName);
                }

                if (formData.staffExpenseName) {
                    // If there's a name provided, update the other expense name cell
                    $('.staff').text(formData.staffExpenseName);
                }

                if (formData.otherExpenseName) {
                    // If there's a name provided, update the other expense name cell
                    $('.other').text(formData.otherExpenseName);
                }
            }

            function updateExpensesAndMargins(formData) {
    // Destructure formData to get the relevant expense values and months
    const { fixedExpense, fixedExpenseMonth, rAndDExpense, rAndDExpenseMonth, salesExpense, salesExpenseMonth, marketingExpense, marketingExpenseMonth, staffExpense, staffExpenseMonth, otherExpense, otherExpenseMonth, rev_yearly } = formData;

    // Helper function to determine the year given the month
    const determineYear = month => Math.ceil(month / 12);

    // Helper function to aggregate expenses by year
    const aggregateExpensesByYear = (expense, expenseMonths) => {
        const yearlyExpenses = {};
        expenseMonths.forEach(month => {
            const year = determineYear(month);
            if (!yearlyExpenses[year]) yearlyExpenses[year] = 0;
            yearlyExpenses[year] += expense;
        });
        return yearlyExpenses;
    };

    // Helper function to update expense and margin for a given category with multiple months
    const updateCategory = (expense, expenseMonths, categoryPrefix) => {
        if (expense && expenseMonths.length > 0) {
            const yearlyExpenses = aggregateExpensesByYear(expense, expenseMonths);

            for (let year = 1; year <= 5; year++) {
                if (yearlyExpenses[year]) {
                    $(`.${categoryPrefix}year${year}`).text(yearlyExpenses[year]); // Update expense value for the year

                    if (rev_yearly[year - 1]) {
                        const margin = (yearlyExpenses[year] / rev_yearly[year - 1]) * 100;
                        $(`.${categoryPrefix}margin${year}`).text(margin.toFixed(2) + '%');
                    }
                } else {
                    // Reset to 0 if no expenses for the year
                    $(`.${categoryPrefix}year${year}`).text('0');
                    $(`.${categoryPrefix}margin${year}`).text('0%');
                }
            }
        }
    };

    // Update each category
    updateCategory(fixedExpense, fixedExpenseMonth, 'fixed');
    updateCategory(rAndDExpense, rAndDExpenseMonth, 'rAndD');
    updateCategory(salesExpense, salesExpenseMonth, 'sales');
    updateCategory(marketingExpense, marketingExpenseMonth, 'marketing');
    updateCategory(staffExpense, staffExpenseMonth, 'staff');
    updateCategory(otherExpense, otherExpenseMonth, 'other');

    // Calculate and update total expenses and margins considering the aggregation
    for (let year = 1; year <= 5; year++) {
        const totalExpense = [fixedExpenseMonth, rAndDExpenseMonth, salesExpenseMonth, marketingExpenseMonth, staffExpenseMonth, otherExpenseMonth]
            .reduce((total, expenseMonths, index) => {
                const expense = [fixedExpense, rAndDExpense, salesExpense, marketingExpense, staffExpense, otherExpense][index];
                return total + (aggregateExpensesByYear(expense, expenseMonths)[year] || 0);
            }, 0);

        $(`.totalyear${year}`).text(totalExpense); // Update total expense

        if (rev_yearly[year - 1]) {
            const totalMargin = (totalExpense / rev_yearly[year - 1]) * 100;
            $(`.totalmargin${year}`).text(totalMargin.toFixed(2) + '%');
        }
    }
}



            function updateProfitTable() {
                // EBITDA calculation
                for (let year = 1; year <= 5; year++) {
                    const grossProfitLoss = parseFloat($(`.GPLYear${year}`).text());
                    const totalExpenses = parseFloat($(`.totalyear${year}`).text());
                    const EBITDA = grossProfitLoss - totalExpenses;
                    $(`.EBITDAyear${year}`).text(EBITDA.toFixed(2));
                }

                // Depreciation & Amortization calculation corrected for accurate yearly distribution
                let monthlyDepreciation = formData.assetAmount / (formData.assetLifespanPer === 'Years' ? formData.assetLifespan * 12 : formData.assetLifespan);
                for (let year = 1; year <= 5; year++) {
                    let depreciation = 0;
                    for (let month = 1; month <= 60; month++) {
                        if (month >= formData.assetMonth && month < formData.assetMonth + (formData.assetLifespanPer === 'Years' ? formData.assetLifespan * 12 : formData.assetLifespan)) {
                            if (Math.ceil(month / 12) === year) {
                                depreciation += monthlyDepreciation;
                            }
                        }
                    }
                    $(`.Depreciationyear${year}`).text(depreciation.toFixed(2));
                }

                // Operating Profit (EBIT) calculation
                for (let year = 1; year <= 5; year++) {
                    const EBITDA = parseFloat($(`.EBITDAyear${year}`).text());
                    const depreciation = parseFloat($(`.Depreciationyear${year}`).text());
                    const EBIT = EBITDA - depreciation;
                    $(`.EBITyear${year}`).text(EBIT.toFixed(2));
                }

                // Interest Expense calculation
                const loanInterestPerMonth = formData.loanInterestPer === 'Per year' ? formData.loanInterest / 100 / 12 : formData.loanInterest / 100;
                for (let year = 1; year <= 5; year++) {
                    const loanInterest = formData.loanAmount * loanInterestPerMonth * 12;
                    $(`.interestyear${year}`).text(loanInterest.toFixed(2));
                }

                // Earnings before Tax (EBT) calculation
                for (let year = 1; year <= 5; year++) {
                    const EBIT = parseFloat($(`.EBITyear${year}`).text());
                    const interestExpense = parseFloat($(`.interestyear${year}`).text());
                    const EBT = EBIT - interestExpense;
                    $(`.EBTyear${year}`).text(EBT.toFixed(2));
                }

                // Tax calculation corrected to apply on EBT
                const taxPercentage = formData.taxAmount / 100;
                for (let year = 1; year <= 5; year++) {
                    const EBT = parseFloat($(`.EBTyear${year}`).text());
                    const tax = EBT * taxPercentage;
                    $(`.taxyear${year}`).text(tax.toFixed(2));
                }

                // NET INCOME (LOSS) calculation
                for (let year = 1; year <= 5; year++) {
                    const EBT = parseFloat($(`.EBTyear${year}`).text());
                    const tax = parseFloat($(`.taxyear${year}`).text());
                    const netIncomeLoss = EBT - tax;
                    $(`.netIncomeLossyear${year}`).text(netIncomeLoss.toFixed(2));
                }
            }


            function visualizeNetIncomeLoss() {
                // Prepare the data for 'NET INCOME (LOSS)' for each year
                let netIncomeLossData = [];
                for (let year = 1; year <= 5; year++) {
                    const netIncomeLoss = parseFloat($(`.netIncomeLossyear${year}`).text());
                    netIncomeLossData.push(netIncomeLoss);
                }

                // Prepare the labels for the chart
                const labels = ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'];

                // Clear any existing chart instance
                if (window.netIncomeLossChart instanceof Chart) {
                    window.netIncomeLossChart.destroy();
                }

                const ctx = document.getElementById('netIncomeChart').getContext('2d');
                window.netIncomeLossChart = new Chart(ctx, {
                    type: 'bar', // This can be changed to 'line' or any other chart type
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'NET INCOME (LOSS)',
                            data: netIncomeLossData,
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.2)', // Example colors
                                'rgba(54, 162, 235, 0.2)',
                                'rgba(255, 206, 86, 0.2)',
                                'rgba(75, 192, 192, 0.2)',
                                'rgba(153, 102, 255, 0.2)'
                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }


            function updateNeedsTable() {
    // First, calculate the 'needsDepreciation' for each year
    for (let year = 1; year <= 5; year++) {
        const netIncomeLoss = parseFloat($(`.netIncomeLossyear${year}`).text());
        const depreciation = parseFloat($(`.Depreciationyear${year}`).text());
        const needsDepreciation = netIncomeLoss + depreciation;
        $(`.needsDepreciationyear${year}`).text(needsDepreciation.toFixed(2));
    }

    // Handle capital asset purchase and shareholder contribution based on user input
    // Assume formData is already populated with capitalAssetAmount, capitalAssetMonth, shareholderAmount, shareholderMonth
    const assetYear = Math.ceil(formData.capitalAssetMonth / 12);
    const shareholderYear = Math.ceil(formData.shareholderMonth / 12);

    // Reset capital asset purchase and shareholder contribution in all years to 0 before updating
    for (let year = 1; year <= 5; year++) {
        $(`.capitalassetpurchaseyear${year}`).text('0');
        $(`.shareholdercontributionyear${year}`).text('0');
    }

    // Update the specific year based on the month input
    if (formData.capitalAssetAmount && assetYear > 0 && assetYear <= 5) {
        $(`.capitalassetpurchaseyear${assetYear}`).text(formData.capitalAssetAmount.toFixed(2));
    }

    if (formData.shareholderAmount && shareholderYear > 0 && shareholderYear <= 5) {
        $(`.shareholdercontributionyear${shareholderYear}`).text(formData.shareholderAmount.toFixed(2));
    }

    // Calculate 'netIncreaseInCash' for each year
    for (let year = 1; year <= 5; year++) {
        const netIncomeLoss = parseFloat($(`.netIncomeLossyear${year}`).text());
        const needsDepreciation = parseFloat($(`.needsDepreciationyear${year}`).text());
        const capitalAssetPurchase = parseFloat($(`.capitalassetpurchaseyear${year}`).text());
        const shareholderContribution = parseFloat($(`.shareholdercontributionyear${year}`).text());

        const netIncreaseInCash = netIncomeLoss - needsDepreciation - capitalAssetPurchase - shareholderContribution;
        $(`.netIncreaseInCashyear${year}`).text(netIncreaseInCash.toFixed(2));
    }
}

function visualizeNetIncreaseInCash() {
    // Prepare the data and labels for the chart
    let labels = ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'];
    let netIncreaseInCashData = [];

    for (let year = 1; year <= 5; year++) {
        const netIncreaseInCash = parseFloat($(`.netIncreaseInCashyear${year}`).text());
        netIncreaseInCashData.push(netIncreaseInCash);
    }

    // Clear any existing instance of the chart before drawing a new one
    if (window.netIncreaseInCashChart instanceof Chart) {
        window.netIncreaseInCashChart.destroy();
    }

    const ctx = document.getElementById('netIncreaseInCashChart').getContext('2d');
    window.netIncreaseInCashChart = new Chart(ctx, {
        type: 'bar', // This can be changed to 'line' or any other chart type as needed
        data: {
            labels: labels,
            datasets: [{
                label: 'Net Increase (Decrease) in Cash',
                data: netIncreaseInCashData,
                backgroundColor: [
                    'rgba(255, 159, 64, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 159, 64, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
}

            $('input, select').change(function () {
                // Update revenue-related data
                collectFormData();
                updateSum(); // Update revenue-related calculations
                visualizeRevenue(); // Assuming this function is related to revenue visualization

                // Update profit-related data
                updateProfitTable(); // Update profit table calculations

                // Display collected form data
                displayFormData();

                // Calculate and print yearly COGS
                const yearlyCOGS = calculateYearlyCOGS(formData);
                $('#testing').append('<p>Yearly COGS: ' + yearlyCOGS.join(', ') + '</p>');
            });



            // Initial call to display form data (if needed)
            collectFormData();
            displayFormData();


            // Toggle visibility of specific fields based on other selections
            $('#other-expenses-dropdown').change(function () {
                if ($(this).val() === 'yes') {
                    $('.other-expenses-specific').show();
                } else {
                    $('.other-expenses-specific').hide();
                }
            }).trigger('change'); // To apply the logic as soon as the page loads

            // Repeat for other dropdowns like staff expenses, sales expenses, etc.
            // Toggle Staff Expenses Specific Fields
            $('#staff-expenses-dropdown').change(function () {
                if ($(this).val() === 'yes') {
                    $('.staff-expenses-specific').show();
                } else {
                    $('.staff-expenses-specific').hide();
                }
            }).trigger('change'); // To apply the logic as soon as the page loads


            // Toggle Sales Expenses Specific Fields
            $('#sales-expenses-dropdown').change(function () {
                if ($(this).val() === 'yes') {
                    $('.sales-expenses-specific').show();
                } else {
                    $('.sales-expenses-specific').hide();
                }
            }).trigger('change'); // To apply the logic as soon as the page loads

            // Toggle Marketing Expenses Specific Fields
            $('#marketing-expenses-dropdown').change(function () {
                if ($(this).val() === 'yes') {
                    $('.marketing-expenses-specific').show();
                } else {
                    $('.marketing-expenses-specific').hide();
                }
            }).trigger('change'); // To apply the logic as soon as the page loads

            // Toggle R&D specific fields
            $('#rAndD-expenses-dropdown').change(function () {
                if ($(this).val() === 'yes') {
                    $('.rAndD-expenses-specific').show();
                } else {
                    $('.rAndD-expenses-specific').hide();
                }
            }).trigger('change'); // To apply the logic as soon as the page loads


            // Toggle repurchase specific fields
            $('#repurchase-checkbox').change(function () {
                if ($(this).is(':checked')) {
                    $('.repurchase-specific').show();
                } else {
                    $('.repurchase-specific').hide();
                }
            });

            // Toggle fixed expenses specific fields
            $('#fixed-expenses-dropdown').change(function () {
                if ($(this).val() === 'yes') {
                    $('.fixed-expenses-specific').show();
                } else {
                    $('.fixed-expenses-specific').hide();
                }
            }).trigger('change'); // To apply the logic as soon as the page loads

            // Update for 'Do you receive a flat fee per sale?'
            $('#flat-fee-per-sale-checkbox').change(function () {
                if ($(this).is(':checked')) {
                    // Show the label and input field for 'Flat fee per sale'
                    $('#flat-fee-per-sale-input').show().prev('label').show();
                } else {
                    // Hide the label and input field for 'Flat fee per sale'
                    $('#flat-fee-per-sale-input').hide().prev('label').hide();
                }
            });

            // Initially hide the 'Flat fee per sale' label and input field
            $('#flat-fee-per-sale-input').hide().prev('label').hide();

            // Update for 'Do you receive a % of sale?'
            $('#percentage-of-sale-checkbox').change(function () {
                if ($(this).is(':checked')) {
                    // Show the label and input field for '% of sales'
                    $('#percentage-of-sale-input').show().prev('label').show();
                } else {
                    // Hide the label and input field for '% of sales'
                    $('#percentage-of-sale-input').hide().prev('label').hide();
                }
            });

            // Initially hide the '% of sales' label and input field
            $('#percentage-of-sale-input').hide().prev('label').hide();


            $('#product-service-dropdown').change(function () {
                var selectedCategory = $(this).val(); // Could be 'product', 'service', or another value

                // Initially hide all lines
                $('.assumption-line').hide();

                // Then, show lines based on the selected category
                if (selectedCategory === 'product') {
                    $('.assumption-line.product').show(); // Show product and both
                } else if (selectedCategory === 'service') {
                    $('.assumption-line.service').show(); // Show service and both
                } else {
                    // If your dropdown includes an option for 'both' or any other logic is needed
                    $('.assumption-line').show(); // Show all lines, adjust as needed for your use case
                }
            }).trigger('change'); // Ensure the correct lines are shown when the page loads


            // Handle tab clicks for left-tabs
            $('#left-tabs li').click(function () {
                var tab_id = $(this).attr('data-tab');

                $('#left-tabs li').removeClass('active');
                $('.assumptions-half .tab-content').removeClass('active');

                $(this).addClass('active');
                $("#" + tab_id).addClass('active');

                // Automatically click the first assumption sub-tab for the selected product
                $("#" + tab_id + " .sub-tabs li").first().click();
            });

            function updateExpensesChart() {
                collectFormData(); // Make sure formData is up-to-date

                // Determine the visualization option selected by the user
                const visualizationOption = $('#expense-visualization-option').val();

                // Adjust data and labels based on the selected visualization option
                let labels = [];
                let transformedData = {
                    fixedExpensesArray: [],
                    rAndDExpensesArray: [],
                    salesExpensesArray: [],
                    marketingExpensesArray: [],
                    staffExpensesArray: [],
                    otherExpensesArray: [],
                };

                switch (visualizationOption) {
                    case 'monthly':
                        labels = Array.from({ length: formData.totalExpensesArray.length }, (_, i) => `Month ${i + 1}`);
                        transformedData = formData; // Use data as is for monthly visualization
                        break;
                    case 'quarterly':
                        labels = Array.from({ length: Math.ceil(formData.totalExpensesArray.length / 3) }, (_, i) => `Quarter ${i + 1}`);
                        // Aggregate data into quarters
                        Object.keys(transformedData).forEach(key => {
                            transformedData[key] = formData[key].reduce((acc, curr, i) => {
                                let idx = Math.floor(i / 3);
                                acc[idx] = (acc[idx] || 0) + curr;
                                return acc;
                            }, []);
                        });
                        break;
                    case 'yearly':
                        labels = ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'];
                        // Aggregate data into years
                        Object.keys(transformedData).forEach(key => {
                            transformedData[key] = formData[key].reduce((acc, curr, i) => {
                                let idx = Math.floor(i / 12);
                                acc[idx] = (acc[idx] || 0) + curr;
                                return acc;
                            }, []);
                        });
                        break;
                }

                var ctx = document.getElementById('expensesChart').getContext('2d');
                if (window.expensesChart instanceof Chart) {
                    window.expensesChart.destroy();
                }

                window.expensesChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Fixed Expenses',
                            backgroundColor: 'rgb(255, 99, 132)', // Red
                            data: transformedData.fixedExpensesArray,
                        }, {
                            label: 'R&D Expenses',
                            backgroundColor: 'rgb(54, 162, 235)', // Blue
                            data: transformedData.rAndDExpensesArray,
                        }, {
                            label: 'Sales Expenses',
                            backgroundColor: 'rgb(255, 206, 86)', // Yellow
                            data: transformedData.salesExpensesArray,
                        }, {
                            label: 'Marketing Expenses',
                            backgroundColor: 'rgb(75, 192, 192)', // Green
                            data: transformedData.marketingExpensesArray,
                        }, {
                            label: 'Staff Expenses',
                            backgroundColor: 'black', // black
                            data: transformedData.staffExpensesArray,
                        }, {
                            label: 'Other Expenses',
                            backgroundColor: 'rgb(153, 102, 255)', // Purple
                            data: transformedData.otherExpensesArray,
                        }]
                    },
                    options: {
                        scales: {
                            x: { stacked: true },
                            y: {
                                beginAtZero: true,
                                stacked: true
                            }
                        },
                        plugins: {
                            legend: { position: 'top' },
                            title: {
                                display: true,
                                text: 'Expenses Breakdown'
                            }
                        },
                        responsive: true,
                        maintainAspectRatio: false,
                    }
                });
            }

            // Add an event listener to the dropdown for visualization option changes
            $('#expense-visualization-option').change(function () {
                updateExpensesChart(); // Update the chart based on the new visualization option
            });

            // Call updateExpensesChart on relevant input changes
            $('input[type=number], select').change(function () {
                // Call updateExpensesChart if the expenses tab is active
                if ($('#expenses').hasClass('active')) {
                    updateExpensesChart();
                }
            });

            // Handle tab clicks for right-tabs
            $('#right-tabs li').click(function () {
                var tab_id = $(this).attr('data-tab');

                $('#right-tabs li').removeClass('active');
                $('.graphs-half .tab-content').removeClass('active');

                $(this).addClass('active');
                $("#" + tab_id).addClass('active');

                // Update the expenses chart when the Expenses tab is clicked
                if (tab_id === 'expenses') {
                    updateExpensesChart();
                }
            });

            // Handle sub-tab clicks
            $('.sub-tabs li').click(function () {
                var sub_tab_id = $(this).attr('data-sub-tab');
                var parentTabContent = $(this).closest('.tab-content');

                parentTabContent.find('.sub-tabs li').removeClass('active');
                parentTabContent.find('.tab-content').removeClass('active');

                $(this).addClass('active');
                $("#" + sub_tab_id).addClass('active');
            });

            // Toggle asset-specific fields based on 'tax' dropdown
            $('#purchase-assets-dropdown').change(function () {
                if ($(this).val() === 'yes') {
                    $('.asset-specific').show();
                } else {
                    $('.asset-specific').hide();
                }
            }).trigger('change'); // Automatically apply the logic when the page loads

            $('#loans-dropdown').change(function () {
                if ($(this).val() === 'yes') {
                    $('.loan-details-specific').show();
                } else {
                    $('.loan-details-specific').hide();
                }
            }).trigger('change'); // Ensure correct display on page load



            // Trigger initial tab and sub-tab click to display default view
            $('#left-tabs li:first').click();
            $('#right-tabs li:first').click();
            $('#revenue-visualization-option').val('yearly').change();

            toggleRevenueShareFields();
            toggleRecurringPaymentFields();
        });
    </script>
</body>

</html>
